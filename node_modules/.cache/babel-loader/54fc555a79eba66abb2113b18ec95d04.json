{"ast":null,"code":"import _objectSpread from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'../api/axios';import Modal from'../Components/Modal';import{useForm}from'react-hook-form';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TICKET_URL='/ticket';var Home=function Home(){var _errors$name,_errors$lastname,_errors$ticketNumber,_errors$ticketNumber2;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),postMessage=_useState4[0],setPostMessage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),getTicketNumber=_useState6[0],setGetTicketNumber=_useState6[1];var _useCookies=useCookies([\"name\",\"lastname\",\"ticketNumber\"]),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookies=_useCookies2[1];var _useForm=useForm({mode:\"onChange\",defaultValues:{name:\"\",lastname:\"\",ticketNumber:0}}),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset,getValues=_useForm.getValues;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(TICKET_URL,data).then(function(res){var userToAdd={name:data.name,lastname:data.lastname,ticketNumber:data.ticketNumber};var prevUsers=cookies[\"users\"]||[];var newUsers=[].concat(_toConsumableArray(prevUsers),[userToAdd]);var cookieData=new Date();cookieData.setTime(cookieData.getTime()+60*10000);setCookies(\"users\",newUsers,{path:\"/\",expires:cookieData});setPostMessage(res.data.success);setShowModal(true);}).catch(function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){setShowModal(false);reset({name:\"\",lastname:\"\",ticketNumber:0});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Modal,{showModal:showModal,postMessage:postMessage,ticketNumber:getTicketNumber,handleClose:handleClose}),/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-ticket text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Loterijos bilietas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),method:\"POST\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"form-control\",placeholder:\"\\u012Eveskite savo vard\\u0105\"},register(\"name\",{required:true}))),/*#__PURE__*/_jsx(\"div\",{class:\"invalid-feedback\",children:((_errors$name=errors.name)===null||_errors$name===void 0?void 0:_errors$name.type)===\"required\"&&\"Vardas yra privalomas\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"form-control\",placeholder:\"\\u012Eveskite savo pavard\\u0119\"},register(\"lastname\",{required:true}))),/*#__PURE__*/_jsx(\"div\",{class:\"invalid-feedback\",children:((_errors$lastname=errors.lastname)===null||_errors$lastname===void 0?void 0:_errors$lastname.type)===\"required\"&&\"Pavardė yra privaloma\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",className:\"form-control\",placeholder:\"\\u012Eveskite norima skai\\u010Di\\u0173\"},register(\"ticketNumber\",{min:1,max:1000}))),/*#__PURE__*/_jsxs(\"div\",{class:\"invalid-feedback\",children:[((_errors$ticketNumber=errors.ticketNumber)===null||_errors$ticketNumber===void 0?void 0:_errors$ticketNumber.type)==='min'&&\"Minimalus bilieto skaičius 1\",((_errors$ticketNumber2=errors.ticketNumber)===null||_errors$ticketNumber2===void 0?void 0:_errors$ticketNumber2.type)==='max'&&\"Maksimalus bilieto skaičius 1000\"]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:function onClick(){var values=getValues('ticketNumber');setGetTicketNumber(values);},children:\"Nusipirkti\"})]})})]})})]});};export default Home;","map":{"version":3,"names":["React","useState","axios","Modal","useForm","useCookies","TICKET_URL","Home","showModal","setShowModal","postMessage","setPostMessage","getTicketNumber","setGetTicketNumber","cookies","setCookies","mode","defaultValues","name","lastname","ticketNumber","register","errors","formState","handleSubmit","reset","getValues","onSubmit","data","post","then","res","userToAdd","prevUsers","newUsers","cookieData","Date","setTime","getTime","path","expires","success","catch","err","console","log","handleClose","required","type","min","max","values"],"sources":["C:/Users/Rokas/Desktop/rrloto – kopija/frontend/src/Pages/Home.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from '../api/axios';\r\nimport Modal from '../Components/Modal';\r\nimport { useForm } from 'react-hook-form';\r\nimport {useCookies} from 'react-cookie';\r\n\r\nconst TICKET_URL = '/ticket';\r\n\r\nconst Home = () => {\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [postMessage, setPostMessage] = useState('');\r\n    const [getTicketNumber, setGetTicketNumber] = useState(0);\r\n    const [cookies, setCookies] = useCookies([\"name\", \"lastname\", \"ticketNumber\"]);\r\n\r\n    const {\r\n        register, \r\n        formState: {errors}, \r\n        handleSubmit,\r\n        reset,\r\n        getValues,\r\n    } = useForm({\r\n        mode: \"onChange\",\r\n        defaultValues: {\r\n            name: \"\",\r\n            lastname: \"\",\r\n            ticketNumber: 0,\r\n        }\r\n    });\r\n\r\n    const onSubmit = async (data) => {\r\n        await axios.post(TICKET_URL, data)\r\n            .then((res) => {\r\n                const userToAdd = {name: data.name, lastname: data.lastname, ticketNumber: data.ticketNumber}\r\n                const prevUsers = cookies[\"users\"] || [];\r\n                const newUsers = [...prevUsers, userToAdd];\r\n                const cookieData = new Date();\r\n                cookieData.setTime(cookieData.getTime() + ( 60 * 10000));\r\n\r\n                setCookies(\"users\", newUsers, {path: \"/\", expires: cookieData});\r\n\r\n                setPostMessage(res.data.success);\r\n                setShowModal(true);\r\n\r\n            })\r\n            .catch((err)=>{console.log(err)})\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setShowModal(false)\r\n        reset({name: \"\", lastname: \"\", ticketNumber: 0});\r\n    }\r\n\r\n\r\n    return(\r\n        <>\r\n            <Modal showModal={showModal} postMessage={postMessage} ticketNumber={getTicketNumber} handleClose={handleClose}/>\r\n            <div className='container d-flex justify-content-center'>\r\n                <div className=\"card card-ticket text-center\">\r\n                    <div className=\"card-header\">\r\n                        Loterijos bilietas\r\n                    </div>\r\n                    <div className='card-body'>\r\n                        <form onSubmit={handleSubmit(onSubmit)} method=\"POST\">\r\n                            <div className='form-group'>\r\n                                <input \r\n                                    type='text' \r\n                                    className='form-control' \r\n                                    placeholder='Įveskite savo vardą'\r\n                                    {...register(\"name\", {required: true})}\r\n                                />\r\n                                <div class=\"invalid-feedback\">\r\n                                    {errors.name?.type === \"required\" && \"Vardas yra privalomas\"}\r\n                                </div>\r\n                            </div>\r\n                            <div className='form-group'>\r\n                                <input \r\n                                    type='text' \r\n                                    className='form-control' \r\n                                    placeholder='Įveskite savo pavardę'\r\n                                    {...register(\"lastname\", {required: true})}\r\n                                />\r\n                                <div class=\"invalid-feedback\">\r\n                                    {errors.lastname?.type === \"required\" && \"Pavardė yra privaloma\"}\r\n                                </div>\r\n                            </div>\r\n                            <div className='form-group'>\r\n                                <input \r\n                                    type='number' \r\n                                    className='form-control' \r\n                                    placeholder='Įveskite norima skaičių' \r\n                                    {...register(\"ticketNumber\", {min: 1, max: 1000})}\r\n                                />\r\n                                <div class=\"invalid-feedback\">\r\n                                    {errors.ticketNumber?.type === 'min' && \"Minimalus bilieto skaičius 1\"}\r\n                                    {errors.ticketNumber?.type === 'max' && \"Maksimalus bilieto skaičius 1000\"}\r\n                                </div>\r\n                            </div>\r\n                            <button \r\n                                type='submit' \r\n                                className='btn btn-primary'\r\n                                onClick={() => {\r\n                                    const values = getValues('ticketNumber');\r\n                                    setGetTicketNumber(values);\r\n                                }}\r\n                            >\r\n                                Nusipirkti\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module"}