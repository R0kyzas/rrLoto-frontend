{"ast":null,"code":"import _objectSpread from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Rokas/Desktop/rrloto \\u2013 kopija/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{useForm}from'react-hook-form';import CircularProgress from'@mui/material/CircularProgress';import Box from'@mui/material/Box';import{usePromiseTracker,trackPromise}from\"react-promise-tracker\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LOGIN_URL='/login';var Login=function Login(props){var _errors$username,_errors$password;var loginToken=sessionStorage.getItem('loggedIn');var _usePromiseTracker=usePromiseTracker({area:props.area}),promiseInProgress=_usePromiseTracker.promiseInProgress;var navigate=useNavigate();useEffect(function(){if(loginToken){navigate('/admin');}},[]);var _useForm=useForm({mode:\"onChange\",defaultValues:{username:\"\",password:\"\"}}),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit;var postUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/api/login',data).then(function(res){if(res.status===200){sessionStorage.setItem(\"loggedIn\",res.data.token);navigate('/admin');}}).catch(function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function postUserData(_x){return _ref.apply(this,arguments);};}();var onSubmit=function onSubmit(data){trackPromise(postUserData(data));};return/*#__PURE__*/_jsxs(_Fragment,{children:[promiseInProgress&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',position:'absolute',top:'0',left:'0',right:'0',height:'100%',alignItems:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})}),!promiseInProgress&&/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:\"Prisijungimas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),method:\"POST\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"form-control\",placeholder:\"\\u012Eveskite slapyvard\\u012F\"},register(\"username\",{required:true})))}),/*#__PURE__*/_jsx(\"div\",{class:\"invalid-feedback\",children:((_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.type)===\"required\"&&\"Slapyvardis privalomas\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:\"form-control\",placeholder:\"\\u012Eveskite slapta\\u017Eod\\u012F\"},register(\"password\",{required:true})))}),/*#__PURE__*/_jsx(\"div\",{class:\"invalid-feedback\",children:((_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.type)===\"required\"&&\"Slaptažodis privalomas\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Prisijungti\"})]})})]})})]});};export default Login;","map":{"version":3,"names":["React","useEffect","useState","axios","useForm","CircularProgress","Box","usePromiseTracker","trackPromise","useNavigate","LOGIN_URL","Login","props","loginToken","sessionStorage","getItem","area","promiseInProgress","navigate","mode","defaultValues","username","password","register","errors","formState","handleSubmit","postUserData","data","post","then","res","status","setItem","token","catch","err","console","log","onSubmit","display","justifyContent","position","top","left","right","height","alignItems","required","type"],"sources":["C:/Users/Rokas/Desktop/rrloto – kopija/frontend/src/Pages/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useForm } from 'react-hook-form';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Box from '@mui/material/Box';\r\nimport { usePromiseTracker, trackPromise } from \"react-promise-tracker\";\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst LOGIN_URL = '/login';\r\n\r\nconst Login = (props) => {\r\n    const loginToken = sessionStorage.getItem('loggedIn');\r\n    const { promiseInProgress } = usePromiseTracker({area: props.area});\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(()=>{\r\n        if(loginToken)\r\n        {\r\n            navigate('/admin');\r\n        }\r\n    },[]);\r\n    \r\n    const {\r\n        register, \r\n        formState: {errors}, \r\n        handleSubmit,\r\n    } = useForm({\r\n        mode: \"onChange\",\r\n        defaultValues: {\r\n            username: \"\",\r\n            password: \"\",\r\n        }\r\n    });\r\n\r\n    const postUserData = async (data) => {\r\n        await axios.post('/api/login',data)\r\n        .then((res) => {\r\n            if(res.status === 200)\r\n            {\r\n                sessionStorage.setItem(\"loggedIn\", res.data.token);\r\n                navigate('/admin');\r\n            }\r\n        })\r\n        .catch((err)=>{console.log(err)})\r\n    }\r\n    \r\n    const onSubmit = (data) => {\r\n        trackPromise(postUserData(data));\r\n    }\r\n\r\n    return(\r\n        <>\r\n            {promiseInProgress &&\r\n                <Box sx={{ \r\n                    display: 'flex', \r\n                    justifyContent: 'center', \r\n                    position: 'absolute', \r\n                    top: '0', \r\n                    left: '0', \r\n                    right: '0', \r\n                    height: '100%', \r\n                    alignItems: 'center'\r\n                }}>\r\n                    <CircularProgress />\r\n                </Box>\r\n            }\r\n            {!promiseInProgress &&\r\n                <div className='container d-flex justify-content-center'>\r\n                    <div className=\"card text-center\">\r\n                        <div className=\"card-header\">\r\n                             Prisijungimas\r\n                        </div>\r\n                        <div className='card-body'>\r\n                            <form onSubmit={handleSubmit(onSubmit)} method=\"POST\" >\r\n                                    <div className='form-group'>\r\n                                        <input \r\n                                            type='text' \r\n                                            className='form-control' \r\n                                            placeholder='Įveskite slapyvardį'\r\n                                            {...register(\"username\", {required: true})}\r\n                                        />\r\n                                    </div>\r\n                                    <div class=\"invalid-feedback\">\r\n                                        {errors.username?.type === \"required\" && \"Slapyvardis privalomas\"}\r\n                                    </div>\r\n                                    <div className='form-group'>\r\n                                        <input \r\n                                            type='password' \r\n                                            className='form-control' \r\n                                            placeholder='Įveskite slaptažodį'\r\n                                            {...register(\"password\", {required: true})}\r\n                                         />\r\n                                    </div>\r\n                                    <div class=\"invalid-feedback\">\r\n                                        {errors.password?.type === \"required\" && \"Slaptažodis privalomas\"}\r\n                                    </div>\r\n                                    <button \r\n                                        type='submit' \r\n                                        className='btn btn-primary'\r\n                                    >\r\n                                        Prisijungti\r\n                                    </button>\r\n                                </form>\r\n                        </div>\r\n                     </div>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}